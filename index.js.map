{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport * as main from \"../main\";\n\nlet lightbox = new SimpleLightbox(\".gallery a\");\n\nexport function createGallery(images){\n return images.map(({webformatURL,largeImageURL, tags, likes, views, comments, downloads}) => \n      `<li class=\"gallery-item\">\n     <a class=\"gallery-link\" href=\"${largeImageURL}\">\n     <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"200\"/>\n     </a>\n     <ul class=\"gallery-info\">\n     <li class=\"gallery-info-item\">\n     <h3 class=\"gallery-info-title\">Likes</h3>\n     <p class=\"gallery-info-text\">${likes}</p>\n     </li>\n     <li class=\"gallery-info-item\">\n     <h3 class=\"gallery-info-title\">Views</h3>\n     <p class=\"gallery-info-text\">${views}</p>\n     </li>\n     <li class=\"gallery-info-item\">\n     <h3 class=\"gallery-info-title\">Comments</h3>\n     <p class=\"gallery-info-text\">${comments}</p>\n     </li>\n     <li class=\"gallery-info-item\">\n     <h3 class=\"gallery-info-title\">Downloads</h3>\n     <p class=\"gallery-info-text\">${downloads}</p>\n     </li>\n     </ul>\n    </li>`).join(\"\");\n\n\n}\n   \nexport function markup(arr){\n    main.gallery.insertAdjacentHTML(\"beforeend\", createGallery(arr));\n    lightbox.refresh();\n}\n\nexport function clearGallery(){\n   main.gallery.innerHTML = \"\";\n}\n\nexport function showLoader(){\n  main.loader.classList.remove(\"hide\");\n}\n\nexport function hideLoader(){\n  main.loader.classList.add(\"hide\");\n}\n\nexport function showLoadMoreButton(){\nmain.button.classList.remove(\"hide\");\n}\n\nexport function hideLoadMoreButton(){\nmain.button.classList.add(\"hide\");\n}\nexport function showArrow(){\n  main.arrow.classList.remove(\"hide\");\n}\nexport function hideArrow(){\n  main.arrow.classList.remove(\"hide\");\n}\n\n \nexport function showError(){\n     iziToast.error({\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      messageColor: \"#fafafb\",\n      backgroundColor: \"#ef4040\",\n      messageSize: \"16px\",\n      position: \"topRight\",\n      icon: 'material-icons',\n  })\n }\n export function showEmptyInputError(){\n     iziToast.error({\n      message: 'Please enter the correct name!',\n      messageColor: \"#fafafb\",\n      backgroundColor: \"#ef4040\",\n      messageSize: \"16px\",\n      position: \"topRight\",\n      icon: 'material-icons',\n  })\n }\n\n  \nexport function showFinishedCollectionError(){\n     iziToast.error({\n      message: `We're sorry, but you've reached the end of search results`,\n      messageColor: \"#fafafb\",\n      backgroundColor: \"#ef4040\",\n      messageSize: \"16px\",\n      position: \"topRight\",\n      icon: 'material-icons',\n  })\n }\n","import axios from \"axios\";\n\nconst keyAPI = \"54675250-921b736f026c47058d05b606e\";\nconst urlAPI = \"https://pixabay.com/api/\";\n\n\nexport const perPage = 15;\n\nexport const  getImagesByQuery = async (query, page = 1) => {\n    const response = await axios.get(urlAPI, {params:{\n    key: keyAPI,\n    q: `${query}`,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    page,\n    per_page: perPage,\n    }});\n    return response.data;\n    \n}\n    \n","\nimport * as render from \"./js/render-functions.js\";\nimport * as request from \"./js/pixabay-api.js\";\n\nconst form = document.querySelector(\".form\");\nexport const gallery = document.querySelector(\".gallery\");\nexport const loader = document.querySelector(\".loader\");\nexport const button = document.querySelector(\".gallery-btn\");\nexport const arrow = document.querySelector(\".nav-btn\");\n\nform.addEventListener(\"submit\", handleSubmit);\nbutton.addEventListener(\"click\", handleClick);\n\nlet inputData = \"\";\nlet page = 1;\nlet totalPages = 0;\nasync function handleSubmit(event){\nevent.preventDefault();\nrender.hideLoadMoreButton();\ninputData = event.target.elements['search-text'].value.trim();\n if(!inputData.length){ \n  return render.showEmptyInputError();\n }\n render.clearGallery();\n render.showLoader();\n \n try {\n     page = 1;\n     const data = await request.getImagesByQuery(inputData, page); \n     if(!data.hits.length){ \n         return render.showError();\n        }\n        render.markup(data.hits);\n        render.showLoadMoreButton();\n        \n        totalPages = data.totalHits / request.perPage;\n        if (page >= totalPages) {\n                render.hideLoadMoreButton();\n                render.showFinishedCollectionError();\n            }\n} catch (error) {\n    render.showError();     \n}finally{\n    render.hideLoader();\n    event.target.reset();\n}\n}\n \nasync function handleClick(){\n    render.showLoader();\n    render.hideLoadMoreButton();\n    button.disabled = true;\n    render.hideArrow();\n    try {\n        page += 1;       \n        const newQuery = await request.getImagesByQuery(inputData, page);\n          if (page >= totalPages) {\n                render.hideLoadMoreButton();\n                render.showFinishedCollectionError();\n            } \n        render.showArrow();\n        render.markup(newQuery.hits);\n        render.hideLoader();\n        render.showLoadMoreButton();\n        button.disabled = false;\n        const card = document.querySelector(\".gallery-item\");\n        const cardHeight = card.getBoundingClientRect().height;\n       window.scrollBy({\n          left: 0,\n          top: `${cardHeight * 2}`,\n          behavior: \"smooth\",\n});        \n    } catch (error) {\n        render.showError();\n    }finally{\n        render.hideLoader();\n    }\n}"],"names":["lightbox","SimpleLightbox","createGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","markup","arr","main.gallery","clearGallery","showLoader","main.loader","hideLoader","showLoadMoreButton","main.button","hideLoadMoreButton","showArrow","main.arrow","hideArrow","showError","iziToast","showEmptyInputError","showFinishedCollectionError","keyAPI","urlAPI","perPage","getImagesByQuery","query","page","axios","form","gallery","loader","button","arrow","handleSubmit","handleClick","inputData","totalPages","event","render.hideLoadMoreButton","render.showEmptyInputError","render.clearGallery","render.showLoader","data","request.getImagesByQuery","render.showError","render.markup","render.showLoadMoreButton","request.perPage","render.showFinishedCollectionError","render.hideLoader","render.hideArrow","newQuery","render.showArrow","cardHeight"],"mappings":"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"}